<div class="login-wrapper" fxLayout="row" fxLayoutAlign="center center">
    <mat-card class="box">
      <h1>
      <mat-card-header class="title">
        <mat-card-title style="font-size:28px;">REGISTRATION FORM</mat-card-title>
      </mat-card-header>
    </h1>
    <mat-card-content>
      <form class="example-form" [formGroup]="form" (ngSubmit)="registerUser()"  novalidate fxLayout="column wrap" fxLayoutAlign="center center" fxLayoutGap="10px">
        
          <mat-form-field class="example-full-width">
            <mat-label>User Name:</mat-label>
            <mat-icon matPrefix>account_circle</mat-icon>
            <input  type = "text" matInput (input)="checkUserName(form)" placeholder="Enter Username" formControlName="username" [(ngModel)]="user.username"   required>
            <mat-error *ngIf="form.controls['username'].invalid && form.controls['username'].touched">
              <span *ngIf="form.get('username').hasError('minlength')" style="font-size:medium;">Min length is <strong>5</strong> characters</span>
              <span *ngIf="form.get('username').hasError('required')" style="font-size:medium;">Username is <strong>required</strong></span>
              <span *ngIf="form.controls['username'].hasError('usernameExist')" style="font-size:medium;">Username already <strong>exists</strong></span>
            </mat-error>
          </mat-form-field>
          <br>
          <br>
          <mat-form-field class="example-full-width">
            <mat-label>Password:</mat-label>
            <mat-icon matPrefix>lock_outline</mat-icon>
            <input type="password" [type]="hide ? 'password' : 'text'" matInput placeholder="Enter Password" formControlName="password" [(ngModel)]="user.password" required>
            <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide" type="button">
              <mat-icon>{{hide ? 'visibility' : 'visibility_off'}}</mat-icon>
            </button>
            <mat-error *ngIf="form.controls['password'].invalid && form.controls['password'].touched">
              <span *ngIf="form.get('password').hasError('required')" style="font-size:medium;">Password is <strong>Required</strong></span>
              <span *ngIf="form.get('password').hasError('pattern')" style="font-size:medium;">Password should contain atleast one uppercase,one numeric,min 8 characters,lowercase and special character </span>
            </mat-error>
          </mat-form-field>

          <br>
          <br>
          <mat-form-field>
            <mat-label>Confirm Password</mat-label>
            <mat-icon matPrefix>lock_outline</mat-icon>
            <input matInput type="password" [type]="hide ? 'password' : 'text'" placeholder="confirm password" [(ngModel)]="user.confpassword"
            (input)="validatePassword(form)" formControlName="confpassword" ng-required="true">
            <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide" type="button">
                <mat-icon>{{hide ? 'visibility' : 'visibility_off'}}</mat-icon>
            </button>
            <mat-error *ngIf="form.controls['confpassword'].touched">
              <span *ngIf="form.get('confpassword').hasError('required')" style="font-size:medium;">Confirm Password is <strong>Required</strong></span>
              <mat-error *ngIf="form.controls['confpassword'].hasError('passwordMismatch')" style="font-size:medium;">Password and Confirm Password doesnot match</mat-error>
          </mat-error>
        </mat-form-field>
        <br>
        <br>
          <mat-form-field class="example-full-width">
            <mat-label>Email:</mat-label>
            <mat-icon matPrefix>email</mat-icon>
            <input type="text" matInput placeholder="Enter Email" formControlName="email" [(ngModel)]="user.email" required>
            <mat-error *ngIf="form.controls['email'].invalid && form.controls['email'].touched">
              <span *ngIf="form.get('email').hasError('pattern')" style="font-size:medium;">Email pattern Example is <strong>email123@gmail.com</strong></span>
              <span *ngIf="form.get('email').hasError('required')" style="font-size:medium;">Email is <strong>required</strong></span>
            </mat-error>
          </mat-form-field>
          <br>
          <br>
          <mat-form-field class="example-full-width">
            <mat-label>Choose a Secret Question</mat-label>
            <mat-icon matPrefix>Question</mat-icon>
            <mat-select [(ngModel)]="user.secretQuestion" formControlName="secretQuestion">
                <mat-option *ngFor="let q of qns1" [value]="q.name">{{q.name}}</mat-option>
            </mat-select>
            <mat-error *ngIf="form.controls['secretQuestion'].invalid && form.controls['secretQuestion'].touched">
              <span *ngIf="form.get('secretQuestion').hasError('required')" style="font-size:medium;">SecretQuestion is <strong>Required</strong></span>
            </mat-error>
          </mat-form-field>
          <br>
          <br>
          <mat-form-field class="example-full-width">
            <mat-label>Your Answer:</mat-label>
            <mat-icon matPrefix>Answer</mat-icon>
            <input type="text" matInput placeholder="Enter Your Answer" formControlName="ans" [(ngModel)]="user.ans" required>
            <mat-error *ngIf="form.controls['ans'].invalid && form.controls['ans'].touched">
              <span *ngIf="form.get('ans').hasError('required')" style="font-size:medium;">Answer is <strong>Required</strong></span>
            </mat-error>
          </mat-form-field>
          <br>
            <button mat-raised-button color="primary" type="submit" >Register</button>
       <br>
       <br>
        <h4><span class="text-center">Have already an account? <a routerLink="/login"
          class="fw-bold text-body"><u style="color:rgb(172, 52, 154);">Login here</u></a></span></h4>
          <br>
          <br>
      </form>
      
    </mat-card-content>
    </mat-card>
  </div>
